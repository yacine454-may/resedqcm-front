<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mode Exploration - ResicoQCM</title>
    <link rel="icon" type="image/x-icon" href="static/favicon.ico">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="shared-styles.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --success-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --warning-gradient: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            --glass-bg: rgba(255, 255, 255, 0.25);
            --glass-border: rgba(255, 255, 255, 0.18);
        }
        /* Light background (full page) */
        body {
            background: linear-gradient(135deg, #f8fafc 0%, #ffffff 50%, #eef2ff 100%);
        }
        
        .gradient-bg {
            background: var(--primary-gradient);
        }
        
        .gradient-secondary {
            background: var(--secondary-gradient);
        }
        
        .gradient-success {
            background: var(--success-gradient);
        }
        
        .gradient-warning {
            background: var(--warning-gradient);
        }
        
        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        }
        
        .modern-card {
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            border-radius: 20px;
            box-shadow: 20px 20px 60px #d9d9d9, -20px -20px 60px #ffffff;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .modern-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 30px 30px 80px #d0d0d0, -30px -30px 80px #ffffff;
        }
        
        .floating-animation {
            animation: floating 3s ease-in-out infinite;
        }
        
        @keyframes floating {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .pulse-glow {
            animation: pulse-glow 2s infinite;
        }
        
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(102, 126, 234, 0.4); }
            50% { box-shadow: 0 0 40px rgba(102, 126, 234, 0.8); }
        }
        
        .slide-in-left {
            animation: slideInLeft 0.6s ease-out;
        }
        
        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .slide-in-right {
            animation: slideInRight 0.6s ease-out;
        }
        
        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .fade-in-up {
            animation: fadeInUp 0.8s ease-out;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .progress-ring__circle {
            transition: stroke-dashoffset 0.5s;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }
        
        .neon-button {
            position: relative;
            background: linear-gradient(45deg, #667eea, #764ba2);
            border: none;
            border-radius: 15px;
            padding: 12px 24px;
            color: white;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .neon-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }
        
        .neon-button:hover::before {
            left: 100%;
        }
        
        .neon-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }
        
        .text-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .hover-scale {
            transition: transform 0.3s ease;
        }
        
        .hover-scale:hover {
            transform: scale(1.05);
        }
        
        .filter-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.2);
        }
        
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            background: white;
            border-radius: 20px;
            max-width: 90vw;
            max-height: 90vh;
            width: 800px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
            transform: scale(0.9) translateY(20px);
            transition: transform 0.3s ease;
            overflow: hidden;
        }
        
        .modal-overlay.show .modal-content {
            transform: scale(1) translateY(0);
        }
        /* Full-page dark background */
        .dark {
            background: linear-gradient(135deg, #0b1220 0%, #0f1b33 50%, #0a1f3a 100%) !important;
            color: #e5e7eb;
        }
        .dark .glass-card {
            background: rgba(31, 41, 55, 0.85);
            border-color: rgba(75, 85, 99, 0.4);
        }
        .dark .modern-card {
            background: linear-gradient(145deg, #374151, #1f2937);
            box-shadow: 20px 20px 60px #111827, -20px -20px 60px #4b5563;
        }
        .dark .filter-card {
            background: rgba(31, 41, 55, 0.9);
            border-color: rgba(75, 85, 99, 0.4);
        }
        .dark select,
        .dark input,
        .dark .border-gray-200 {
            background-color: #1f2937;
            color: #e5e7eb;
            border-color: #374151 !important;
        }
        .dark .divide-gray-200 { border-color: #334155; }
        .dark .text-gray-600 { color: #94a3b8; }
        .dark .text-gray-500 { color: #64748b; }
    </style>
</head>
<body class="font-sans min-h-screen" id="body">
    <!-- Navigation -->
    <nav class="glass-card sticky top-0 z-50 backdrop-blur-md">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex">
                    <div class="flex-shrink-0 flex items-center">
                        <i data-feather="book-open" class="h-6 w-6 text-indigo-600"></i>
                        <span class="ml-2 text-xl font-bold text-gray-900">ResicoQCM</span>
                    </div>
                    <div class="hidden sm:ml-6 sm:flex sm:space-x-8">
                        <a href="index.html" class="border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">Tableau de bord</a>
                        <a href="exploration.html" class="border-indigo-500 text-gray-900 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">Exploration</a>
                        <a href="revision.html" class="border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">RÃ©vision</a>
                        <a href="exam.html" class="border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium">Examen</a>
                    </div>
                </div>
                <div class="hidden sm:ml-6 sm:flex sm:items-center space-x-4">
                    <!-- Dark Mode Toggle -->
                    <button onclick="toggleDarkMode()" class="p-2 text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-md">
                        <i id="darkModeIcon" data-feather="moon" class="h-5 w-5"></i>
                    </button>
                    
                    <!-- User Profile Dropdown -->
                    <div class="relative" id="userProfileDropdown">
                        <button onclick="toggleProfileMenu()" class="flex items-center space-x-2 p-2 text-gray-700 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-md">
                            <div class="h-8 w-8 bg-indigo-500 rounded-full flex items-center justify-center">
                                <span class="text-white text-sm font-medium">EM</span>
                            </div>
                            <i data-feather="chevron-down" class="h-4 w-4"></i>
                        </button>
                        
                        <div id="profileMenu" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50">
                            <a href="#" onclick="showUserProfile()" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">ParamÃ¨tres</a>
                            <div class="border-t border-gray-100"></div>
                            <a href="login.html" onclick="logout()" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Se dÃ©connecter</a>
                        </div>
                    </div>
                </div>
                <div class="-mr-2 flex items-center sm:hidden">
                    <button type="button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500" aria-controls="mobile-menu" aria-expanded="false">
                        <i data-feather="menu"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile menu -->
        <div class="sm:hidden hidden" id="mobile-menu">
            <div class="pt-2 pb-3 space-y-1">
                <a href="index.html" class="border-transparent text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700 block pl-3 pr-4 py-2 border-l-4 text-base font-medium">Dashboard</a>
                <a href="exploration.html" class="bg-indigo-50 border-indigo-500 text-indigo-700 block pl-3 pr-4 py-2 border-l-4 text-base font-medium">Exploration</a>
                <a href="revision.html" class="border-transparent text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700 block pl-3 pr-4 py-2 border-l-4 text-base font-medium">Revision</a>
                <a href="exam.html" class="border-transparent text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700 block pl-3 pr-4 py-2 border-l-4 text-base font-medium">Exam</a>
                <div class="mt-4 p-4">
                    <a href="login.html" class="w-full flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white gradient-bg hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                        Sign In
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- User Profile Modal -->
    <div id="userProfileModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-4xl h-[80vh] flex">
            <!-- Sidebar Navigation -->
            <div class="w-64 bg-gray-50 rounded-l-lg border-r">
                <div class="p-4 border-b">
                    <h3 class="text-lg font-semibold text-gray-800">ParamÃ¨tres</h3>
                </div>
                <nav class="p-2">
                    <button onclick="showProfileTab()" id="profileTabBtn" class="w-full flex items-center px-3 py-2 text-left text-gray-700 hover:bg-gray-100 rounded-md mb-1 bg-gray-100">
                        <i data-feather="user" class="w-4 h-4 mr-3"></i>
                        Profil
                    </button>
                    <button onclick="showPasswordTab()" id="passwordTabBtn" class="w-full flex items-center px-3 py-2 text-left text-gray-700 hover:bg-gray-100 rounded-md">
                        <i data-feather="lock" class="w-4 h-4 mr-3"></i>
                        Mot de passe
                    </button>
                </nav>
            </div>
            
            <!-- Main Content Area -->
            <div class="flex-1 flex flex-col">
                <!-- Header -->
                <div class="flex justify-between items-center p-6 border-b">
                    <h2 class="text-xl font-semibold text-gray-800" id="modalTitle">Profil</h2>
                    <button onclick="closeUserProfileModal()" class="text-gray-500 hover:text-gray-700">
                        <i data-feather="x" class="w-5 h-5"></i>
                    </button>
                </div>
                
                <!-- Profile Tab Content -->
                <div id="profileTabContent" class="flex-1 p-6 overflow-y-auto">
                    <div class="max-w-2xl">
                        <!-- Avatar Section -->
                        <div class="flex items-center mb-8">
                            <div class="w-20 h-20 bg-indigo-500 rounded-full flex items-center justify-center mr-6">
                                <span class="text-white text-2xl font-bold" id="profileAvatarInitials">EM</span>
                            </div>
                            <div>
                                <h3 class="text-lg font-medium text-gray-900" id="profileDisplayName">Ãtudiant en MÃ©decine</h3>
                                <p class="text-sm text-gray-500">Membre depuis <span id="profileMemberSince">2024</span></p>
                            </div>
                        </div>
                        
                        <!-- Profile Form -->
                        <div class="space-y-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">First name:</label>
                                    <input class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent" 
                                           id="profileFirstName" type="text" placeholder="PrÃ©nom">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Last name:</label>
                                    <input class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent" 
                                           id="profileLastName" type="text" placeholder="Nom de famille">
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Username:</label>
                                <input class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent" 
                                       id="profileUsername" type="text" placeholder="Nom d'utilisateur">
                                <p class="text-xs text-gray-500 mt-1">Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.</p>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Email address:</label>
                                <input class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent" 
                                       id="profileEmail" type="email" placeholder="email@example.com">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Niveau d'Ã©tude:</label>
                                <select class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent" 
                                        id="profileLevel">
                                    <option value="4A">4Ã¨me AnnÃ©e</option>
                                    <option value="5A">5Ã¨me AnnÃ©e</option>
                                    <option value="6A">6Ã¨me AnnÃ©e</option>
                                    <option value="RES">RÃ©sident</option>
                                </select>
                            </div>
                            
                            <div class="pt-4">
                                <button onclick="saveProfile()" class="px-6 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                                    Sauvegarder les modifications
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Password Tab Content -->
                <div id="passwordTabContent" class="flex-1 p-6 overflow-y-auto hidden">
                    <div class="max-w-md">
                        <h3 class="text-lg font-medium text-gray-900 mb-6">Changer le mot de passe</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Mot de passe actuel:</label>
                                <input class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent" 
                                       id="currentPassword" type="password" placeholder="Mot de passe actuel">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Nouveau mot de passe:</label>
                                <input class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent" 
                                       id="newPassword" type="password" placeholder="Nouveau mot de passe">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Confirmer le nouveau mot de passe:</label>
                                <input class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent" 
                                       id="confirmNewPassword" type="password" placeholder="Confirmer le nouveau mot de passe">
                            </div>
                            <div class="pt-4">
                                <button onclick="changePassword()" class="px-6 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                                    Changer le mot de passe
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Page Header -->
        <div class="mb-12 text-center slide-in-left">
            <h1 class="text-5xl font-bold text-gradient mb-4 floating-animation">Mode Exploration</h1>
            <p class="text-xl text-gray-600 max-w-2xl mx-auto">Parcourez les QCMs par module, appliquez des filtres et reprenez lÃ  oÃ¹ vous vous Ãªtes arrÃªtÃ© avec notre systÃ¨me intelligent.</p>
            <div class="mt-6 flex justify-center">
                <div class="w-24 h-1 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full"></div>
            </div>
        </div>

        <!-- Filters -->
        <div class="filter-card p-8 mb-12 fade-in-up">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Module Filter -->
                <div>
                    <label for="moduleFilter" class="block text-sm font-medium text-gray-700 mb-1">Module</label>
                    <select id="moduleFilter" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md">
                        <option value="">Tous les modules</option>
                    </select>
                </div>

                <!-- Level Filter -->
                <div>
                    <label for="levelFilter" class="block text-sm font-medium text-gray-700 mb-1">Niveau</label>
                    <select id="levelFilter" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md">
                        <option value="">Tous les niveaux</option>
                        <option value="4A">4Ã¨me annÃ©e (4A)</option>
                        <option value="5A">5Ã¨me annÃ©e (5A)</option>
                        <option value="6A">6Ã¨me annÃ©e (6A)</option>
                        <option value="RES">RÃ©sidanat (RES)</option>
                    </select>
                </div>

                <!-- Search Filter -->
                <div>
                    <label for="searchInput" class="block text-sm font-medium text-gray-700 mb-1">Recherche</label>
                    <div class="relative">
                        <input id="searchInput" type="text" placeholder="Rechercher un module..." class="mt-1 block w-full pl-10 pr-3 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md" />
                        <i data-feather="search" class="h-4 w-4 text-gray-400 absolute left-3 top-3.5"></i>
                    </div>
                </div>
            </div>
            <div class="mt-6 flex justify-end">
                <button onclick="applyFilters()" type="button" class="neon-button">
                    <i data-feather="filter" class="mr-2 h-4 w-4"></i>
                    Appliquer les filtres
                </button>
            </div>
        </div>

        <!-- QCM Modules -->
        <div class="mb-12 slide-in-right">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-gradient mb-2">Modules Disponibles</h2>
                <p id="filteredCount" class="text-lg text-gray-600">0 module(s) affichÃ©(s)</p>
            </div>
            <div id="modulesContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Modules will be loaded dynamically -->
            </div>
        </div>

        <!-- Recent Activity -->
        <div class="mb-12 fade-in-up">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-gradient mb-2">Votre ActivitÃ© RÃ©cente</h2>
                <p class="text-lg text-gray-600">Suivez vos progrÃ¨s et continuez votre apprentissage</p>
            </div>
            <div class="modern-card overflow-hidden">
                <div id="recentActivityContainer" class="divide-y divide-gray-200">
                    <!-- Activities will be loaded dynamically -->
                </div>
                <div class="px-8 py-6 bg-gradient-to-r from-indigo-50 to-blue-50 text-center">
                    <button type="button" class="neon-button" onclick="showAllActivity()">
                        <i data-feather="activity" class="mr-2 h-4 w-4"></i>
                        Voir toute l'activitÃ©
                    </button>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Activity Modal -->
    <div id="activityModal" class="modal-overlay">
        <div class="modal-content">
            <div class="p-6 border-b border-gray-200">
                <div class="flex items-center justify-between">
                    <h2 class="text-2xl font-bold text-gradient">Toute votre activitÃ©</h2>
                    <button onclick="closeActivityModal()" class="p-2 hover:bg-gray-100 rounded-full transition-colors">
                        <i data-feather="x" class="h-6 w-6 text-gray-500"></i>
                    </button>
                </div>
            </div>
            <div class="p-6 overflow-y-auto" style="max-height: 60vh;">
                <div id="allActivityContainer">
                    <!-- All activities will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200">
        <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
            <div class="md:flex md:items-center md:justify-between">
                <div class="flex justify-center md:order-2 space-x-6">
                    <a href="#" class="text-gray-400 hover:text-gray-500">
                        <i data-feather="twitter"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-gray-500">
                        <i data-feather="facebook"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-gray-500">
                        <i data-feather="instagram"></i>
                    </a>
                </div>
                <div class="mt-8 md:mt-0 md:order-1">
                    <p class="text-center text-base text-gray-400">
                        &copy; 2023 ResicoQCM. Developed by [Your Name]. 
                        <a href="api.html" class="text-indigo-600 hover:text-indigo-500">API Documentation</a>
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // API Base URL - works for both local development and production
        const API_BASE = window.location.hostname === 'localhost' 
            ? 'http://localhost:8001/api' 
            : 'https://qcmbackend-i16b.onrender.com/api';
            
        let allModules = [];
        let userProgress = {};

        // Load exploration data
        async function loadExplorationData() {
            try {
                const token = localStorage.getItem('token');
                if (!token) {
                    window.location.href = 'login.html';
                    return;
                }

                const [modulesRes, progressRes, resultsRes] = await Promise.all([
                    fetch(`${API_BASE}/modules/my`, {
                        headers: { 'Authorization': `Bearer ${token}` }
                    }),
                    fetch(`${API_BASE}/progress/my`, {
                        headers: { 'Authorization': `Bearer ${token}` }
                    }),
                    fetch(`${API_BASE}/results/my`, {
                        headers: { 'Authorization': `Bearer ${token}` }
                    })
                ]);

                if (!modulesRes.ok || !progressRes.ok || !resultsRes.ok) {
                    throw new Error('Erreur lors du chargement des donnÃ©es');
                }

                allModules = await modulesRes.json();
                const progressData = await progressRes.json();
                const resultsData = await resultsRes.json();

                // Create progress lookup
                progressData.modules?.forEach(module => {
                    userProgress[module.module_id] = {
                        correct: module.correct_count || 0,
                        wrong: module.wrong_count || 0,
                        successRate: module.success_rate || 0
                    };
                });

                populateFilters();
                displayModules(allModules);
                displayRecentActivity(resultsData);

            } catch (error) {
                console.error('Erreur chargement exploration:', error);
                document.getElementById('modulesContainer').innerHTML = `
                    <div class="col-span-full text-center py-8">
                        <p class="text-gray-500">Erreur lors du chargement des modules</p>
                    </div>
                `;
            }
        }

        function populateFilters() {
            const moduleFilter = document.getElementById('moduleFilter');
            const uniqueModules = [...new Set(allModules.map(m => m.name))];
            
            uniqueModules.forEach(moduleName => {
                const option = document.createElement('option');
                option.value = moduleName;
                option.textContent = moduleName;
                moduleFilter.appendChild(option);
            });

            // Preselect from query params if provided
            const params = new URLSearchParams(window.location.search);
            const qpModule = params.get('moduleName');
            const qpLevel = params.get('level');
            if (qpModule) moduleFilter.value = qpModule;
            if (qpLevel) document.getElementById('levelFilter').value = qpLevel;
        }

        function displayModules(modules) {
            const container = document.getElementById('modulesContainer');
            const count = document.getElementById('filteredCount');
            
            if (modules.length === 0) {
                container.innerHTML = `
                    <div class="col-span-full text-center py-8">
                        <p class="text-gray-500">Aucun module disponible pour votre niveau</p>
                    </div>
                `;
                if (count) count.textContent = '0 module(s) affichÃ©(s)';
                return;
            }

            container.innerHTML = modules.map(module => {
                const progress = userProgress[module.id] || { correct: 0, wrong: 0, successRate: 0 };
                const totalAnswered = progress.correct + progress.wrong;
                const progressPercentage = module.qcm_count > 0 ? Math.round((totalAnswered / module.qcm_count) * 100) : 0;
                
                // Determine status and colors
                let statusText, statusColor, iconColor, buttonText, buttonAction;
                
                if (totalAnswered === 0) {
                    statusText = 'Non commencÃ©';
                    statusColor = 'bg-gray-100 text-gray-800';
                    iconColor = 'bg-gray-100 text-gray-600';
                    buttonText = 'Commencer';
                    buttonAction = `startModule('${module.id}')`;
                } else if (progressPercentage < 100) {
                    statusText = `${progress.successRate}% maÃ®trisÃ©`;
                    if (progress.successRate >= 80) {
                        statusColor = 'bg-green-100 text-green-800';
                        iconColor = 'bg-green-100 text-green-600';
                    } else if (progress.successRate >= 65) {
                        statusColor = 'bg-blue-100 text-blue-800';
                        iconColor = 'bg-blue-100 text-blue-600';
                    } else if (progress.successRate >= 50) {
                        statusColor = 'bg-yellow-100 text-yellow-800';
                        iconColor = 'bg-yellow-100 text-yellow-600';
                    } else {
                        statusColor = 'bg-red-100 text-red-800';
                        iconColor = 'bg-red-100 text-red-600';
                    }
                    buttonText = 'Continuer';
                    buttonAction = `continueModule('${module.id}')`;
                } else {
                    statusText = 'TerminÃ©';
                    statusColor = 'bg-green-100 text-green-800';
                    iconColor = 'bg-green-100 text-green-600';
                    buttonText = 'RÃ©viser';
                    buttonAction = `reviewModule('${module.id}')`;
                }

                return `
                    <div class="modern-card p-8 hover-scale">
                        <div class="flex items-center justify-between mb-6">
                            <div class="flex items-center">
                                <div class="flex-shrink-0 w-16 h-16 rounded-2xl ${iconColor} flex items-center justify-center pulse-glow">
                                    <i data-feather="book" class="h-8 w-8"></i>
                                </div>
                                <div class="ml-6">
                                    <h3 class="text-xl font-bold text-gray-900 mb-1">${module.name}</h3>
                                    <p class="text-gray-600">${module.qcm_count} QCM(s) â¢ ${module.level}</p>
                                </div>
                            </div>
                            <span class="inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold ${statusColor}">
                                ${statusText}
                            </span>
                        </div>
                        <div class="mb-6">
                            <div class="flex justify-between text-sm mb-2">
                                <span class="text-gray-600 font-medium">Progression</span>
                                <span class="font-bold text-gradient">${totalAnswered}/${module.qcm_count}</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-3 overflow-hidden">
                                <div class="gradient-bg h-3 rounded-full transition-all duration-500 ease-out" style="width: ${progressPercentage}%"></div>
                            </div>
                        </div>
                        <div>
                            <button onclick="${buttonAction}" class="neon-button w-full">
                                <i data-feather="play" class="mr-2 h-4 w-4"></i>
                                ${buttonText}
                            </button>
                        </div>
                    </div>
                `;
            }).join('');

            feather.replace();
            if (count) count.textContent = `${modules.length} module(s) affichÃ©(s)`;
        }

        function displayRecentActivity(results) {
            const container = document.getElementById('recentActivityContainer');
            
            if (!results || results.length === 0) {
                container.innerHTML = `
                    <div class="p-6 text-center">
                        <p class="text-gray-500">Aucune activitÃ© rÃ©cente</p>
                    </div>
                `;
                return;
            }

            // Show last 5 activities
            const recentResults = results.slice(0, 5);
            
            container.innerHTML = recentResults.map(result => {
                const isCompleted = result.completed_at;
                const score = result.score || 0;
                const total = result.total || 0;
                const percentage = total > 0 ? Math.round((score / total) * 100) : 0;
                
                let iconColor, icon;
                if (isCompleted) {
                    if (percentage >= 80) {
                        iconColor = 'bg-green-100 text-green-600';
                        icon = 'check-circle';
                    } else if (percentage >= 60) {
                        iconColor = 'bg-blue-100 text-blue-600';
                        icon = 'check-circle';
                    } else {
                        iconColor = 'bg-yellow-100 text-yellow-600';
                        icon = 'alert-circle';
                    }
                } else {
                    iconColor = 'bg-gray-100 text-gray-600';
                    icon = 'clock';
                }

                const timeText = formatRelativeTime(result.completed_at || result.started_at);
                const statusText = isCompleted 
                    ? `Score: ${score}/${total} (${percentage}%)`
                    : `En cours: ${score}/${total} questions`;

                return `
                    <div class="p-6">
                        <div class="flex items-start">
                            <div class="flex-shrink-0 h-10 w-10 rounded-full ${iconColor} flex items-center justify-center">
                                <i data-feather="${icon}" class="h-5 w-5"></i>
                            </div>
                            <div class="ml-4 flex-1">
                                <div class="flex items-center justify-between">
                                    <p class="text-sm font-medium text-gray-900">
                                        ${isCompleted ? 'TerminÃ©' : 'CommencÃ©'} ${result.module_name || 'Module'}
                                    </p>
                                    <p class="text-sm text-gray-500">${timeText}</p>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">${statusText}</p>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            feather.replace();
        }

        function formatRelativeTime(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diffMs = now - date;
            const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));
            const diffHours = Math.floor(diffMs / (1000 * 60 * 60));
            const diffMinutes = Math.floor(diffMs / (1000 * 60));

            if (diffDays > 0) {
                return `il y a ${diffDays} jour${diffDays > 1 ? 's' : ''}`;
            } else if (diffHours > 0) {
                return `il y a ${diffHours} heure${diffHours > 1 ? 's' : ''}`;
            } else if (diffMinutes > 0) {
                return `il y a ${diffMinutes} minute${diffMinutes > 1 ? 's' : ''}`;
            } else {
                return 'Ã  l\'instant';
            }
        }

        function applyFilters() {
            const moduleFilter = document.getElementById('moduleFilter').value;
            const levelFilter = document.getElementById('levelFilter').value;
            const search = document.getElementById('searchInput').value.trim().toLowerCase();

            let filteredModules = allModules;

            if (moduleFilter) {
                filteredModules = filteredModules.filter(m => m.name === moduleFilter);
            }

            if (levelFilter) {
                filteredModules = filteredModules.filter(m => m.level === levelFilter);
            }

            if (search) {
                filteredModules = filteredModules.filter(m =>
                    (m.name || '').toLowerCase().includes(search) ||
                    (m.level || '').toLowerCase().includes(search)
                );
            }

            displayModules(filteredModules);
        }

        function startModule(moduleId) {
            // Start QCM session for this module
            window.location.href = `exam.html?module=${moduleId}&mode=exploration`;
        }

        function continueModule(moduleId) {
            // Continue QCM session for this module
            window.location.href = `exam.html?module=${moduleId}&mode=exploration`;
        }

        function reviewModule(moduleId) {
            // Review completed module
            window.location.href = `revision.html?module=${moduleId}&mode=revision`;
        }
        
        function showAllActivity() {
            const modal = document.getElementById('activityModal');
            const container = document.getElementById('allActivityContainer');
            
            // Show loading
            container.innerHTML = `
                <div class="text-center py-8">
                    <div class="loading-spinner mx-auto mb-4"></div>
                    <p class="text-gray-500">Chargement de votre activitÃ©...</p>
                </div>
            `;
            
            modal.classList.add('show');
            
            // Load all activity
            loadAllActivity();
        }
        
        function closeActivityModal() {
            const modal = document.getElementById('activityModal');
            modal.classList.remove('show');
        }
        
        async function loadAllActivity() {
            try {
                const token = localStorage.getItem('token');
                if (!token) return;
                
                const response = await fetch(`${API_BASE}/results/my`, {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                
                if (!response.ok) throw new Error('Erreur lors du chargement');
                
                const results = await response.json();
                displayAllActivity(results);
                
            } catch (error) {
                console.error('Erreur chargement activitÃ©:', error);
                document.getElementById('allActivityContainer').innerHTML = `
                    <div class="text-center py-8">
                        <p class="text-red-500">Erreur lors du chargement de l'activitÃ©</p>
                    </div>
                `;
            }
        }
        
        function displayAllActivity(results) {
            const container = document.getElementById('allActivityContainer');
            
            if (!results || results.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-8">
                        <i data-feather="inbox" class="h-16 w-16 text-gray-300 mx-auto mb-4"></i>
                        <p class="text-gray-500 text-lg">Aucune activitÃ© trouvÃ©e</p>
                        <p class="text-gray-400 text-sm">Commencez Ã  rÃ©pondre aux QCMs pour voir votre activitÃ©</p>
                    </div>
                `;
                feather.replace();
                return;
            }
            
            // Group results by date
            const groupedResults = {};
            results.forEach(result => {
                const date = new Date(result.completed_at || result.started_at);
                const dateKey = date.toLocaleDateString('fr-FR', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                });
                
                if (!groupedResults[dateKey]) {
                    groupedResults[dateKey] = [];
                }
                groupedResults[dateKey].push(result);
            });
            
            let html = '';
            Object.entries(groupedResults).forEach(([date, dayResults]) => {
                html += `
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4 capitalize">${date}</h3>
                        <div class="space-y-3">
                `;
                
                dayResults.forEach(result => {
                    const isCompleted = result.completed_at;
                    const score = result.score || 0;
                    const total = result.total || 0;
                    const percentage = total > 0 ? Math.round((score / total) * 100) : 0;
                    const time = new Date(result.completed_at || result.started_at).toLocaleTimeString('fr-FR', {
                        hour: '2-digit',
                        minute: '2-digit'
                    });
                    
                    let iconColor, icon, statusBadge;
                    if (isCompleted) {
                        if (percentage >= 80) {
                            iconColor = 'bg-green-100 text-green-600';
                            icon = 'check-circle';
                            statusBadge = 'bg-green-100 text-green-800';
                        } else if (percentage >= 60) {
                            iconColor = 'bg-blue-100 text-blue-600';
                            icon = 'check-circle';
                            statusBadge = 'bg-blue-100 text-blue-800';
                        } else {
                            iconColor = 'bg-yellow-100 text-yellow-600';
                            icon = 'alert-circle';
                            statusBadge = 'bg-yellow-100 text-yellow-800';
                        }
                    } else {
                        iconColor = 'bg-gray-100 text-gray-600';
                        icon = 'clock';
                        statusBadge = 'bg-gray-100 text-gray-800';
                    }
                    
                    const statusText = isCompleted 
                        ? `${score}/${total} (${percentage}%)`
                        : `En cours: ${score}/${total}`;
                    
                    html += `
                        <div class="modern-card p-4 hover-scale">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <div class="flex-shrink-0 h-12 w-12 rounded-full ${iconColor} flex items-center justify-center">
                                        <i data-feather="${icon}" class="h-6 w-6"></i>
                                    </div>
                                    <div class="ml-4">
                                        <h4 class="font-semibold text-gray-900">${result.module_name || 'Module'}</h4>
                                        <p class="text-sm text-gray-600">${result.mode || 'Session'} â¢ ${time}</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${statusBadge}">
                                        ${statusText}
                                    </span>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                html += `
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
            feather.replace();
        }

        // Dark Mode and Profile functions (same as index.html)
        function toggleDarkMode() {
            const body = document.body;
            const isDark = body.classList.contains('dark');
            const icon = document.getElementById('darkModeIcon');
            
            if (isDark) {
                body.classList.remove('dark');
                if (icon) icon.setAttribute('data-feather', 'moon');
                localStorage.setItem('darkMode', 'false');
            } else {
                body.classList.add('dark');
                if (icon) icon.setAttribute('data-feather', 'sun');
                localStorage.setItem('darkMode', 'true');
            }
            
            feather.replace();
        }
        
        function initializeDarkMode() {
            const darkMode = localStorage.getItem('darkMode');
            const icon = document.getElementById('darkModeIcon');
            
            if (darkMode === 'true') {
                document.body.classList.add('dark');
                if (icon) icon.setAttribute('data-feather', 'sun');
            } else {
                document.body.classList.remove('dark');
                if (icon) icon.setAttribute('data-feather', 'moon');
            }
            feather.replace();
        }

        function toggleProfileMenu() {
            const menu = document.getElementById('profileMenu');
            menu.classList.toggle('hidden');
        }

        // Fonction de test pour crÃ©er un token temporaire (Ã  supprimer en production)
        function createTestToken() {
            const testPayload = {
                username: 'etudiant_test',
                email: 'etudiant@test.com',
                role: '5A',
                firstName: 'Ãtudiant',
                lastName: 'Test',
                iat: Math.floor(Date.now() / 1000)
            };
            
            // CrÃ©er un faux JWT (juste pour les tests)
            const header = btoa(JSON.stringify({typ: 'JWT', alg: 'HS256'}));
            const payload = btoa(JSON.stringify(testPayload));
            const signature = 'test_signature';
            
            return `${header}.${payload}.${signature}`;
        }

        async function showUserProfile() {
            try {
                const token = localStorage.getItem('token');
                if (!token) {
                    window.location.href = 'login.html';
                    return;
                }
                
                // DÃ©coder le token JWT pour obtenir les informations utilisateur
                const payload = JSON.parse(atob(token.split('.')[1]));
                const profile = {
                    username: payload.username || payload.email || 'Utilisateur',
                    email: payload.email || 'Non spÃ©cifiÃ©',
                    level: payload.role || 'Non spÃ©cifiÃ©',
                    firstName: payload.firstName || '',
                    lastName: payload.lastName || '',
                    created_at: payload.iat ? new Date(payload.iat * 1000).toISOString() : new Date().toISOString()
                };
                
                // Remplir les champs du profil
                document.getElementById('profileUsername').value = profile.username;
                document.getElementById('profileEmail').value = profile.email;
                document.getElementById('profileLevel').value = profile.level;
                document.getElementById('profileFirstName').value = profile.firstName;
                document.getElementById('profileLastName').value = profile.lastName;
                
                // Mettre Ã  jour l'affichage
                const fullName = `${profile.firstName} ${profile.lastName}`.trim() || profile.username;
                document.getElementById('profileDisplayName').textContent = fullName;
                document.getElementById('profileMemberSince').textContent = new Date(profile.created_at).getFullYear();
                
                // Mettre Ã  jour les initiales
                const initials = fullName.substring(0, 2).toUpperCase();
                document.getElementById('profileAvatarInitials').textContent = initials;
                
                // S'assurer que l'onglet profil est affichÃ© par dÃ©faut
                showProfileTab();
                
                document.getElementById('userProfileModal').classList.remove('hidden');
                document.getElementById('profileMenu').classList.add('hidden');
                
                // RÃ©initialiser les icÃ´nes Feather
                feather.replace();
            } catch (error) {
                console.error('Erreur:', error);
                alert('Erreur lors du chargement du profil');
            }
        }

        function closeUserProfileModal() {
            document.getElementById('userProfileModal').classList.add('hidden');
        }

        function showProfileTab() {
            // Afficher le contenu du profil et masquer celui du mot de passe
            document.getElementById('profileTabContent').classList.remove('hidden');
            document.getElementById('passwordTabContent').classList.add('hidden');
            
            // Mettre Ã  jour les boutons de navigation
            document.getElementById('profileTabBtn').classList.add('bg-gray-100');
            document.getElementById('passwordTabBtn').classList.remove('bg-gray-100');
            
            // Mettre Ã  jour le titre
            document.getElementById('modalTitle').textContent = 'Profil';
        }

        function showPasswordTab() {
            // Afficher le contenu du mot de passe et masquer celui du profil
            document.getElementById('profileTabContent').classList.add('hidden');
            document.getElementById('passwordTabContent').classList.remove('hidden');
            
            // Mettre Ã  jour les boutons de navigation
            document.getElementById('profileTabBtn').classList.remove('bg-gray-100');
            document.getElementById('passwordTabBtn').classList.add('bg-gray-100');
            
            // Mettre Ã  jour le titre
            document.getElementById('modalTitle').textContent = 'Changer le mot de passe';
            
            // Nettoyer les champs de mot de passe
            document.getElementById('currentPassword').value = '';
            document.getElementById('newPassword').value = '';
            document.getElementById('confirmNewPassword').value = '';
        }

        async function saveProfile() {
            try {
                const firstName = document.getElementById('profileFirstName').value;
                const lastName = document.getElementById('profileLastName').value;
                const username = document.getElementById('profileUsername').value;
                const email = document.getElementById('profileEmail').value;
                const level = document.getElementById('profileLevel').value;

                if (!username || !email) {
                    alert('Le nom d\'utilisateur et l\'email sont requis');
                    return;
                }

                const token = localStorage.getItem('token');
                if (!token) {
                    alert('Vous devez Ãªtre connectÃ© pour sauvegarder votre profil');
                    return;
                }

                const resp = await fetch(`${API_BASE}/user/me`, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ firstName, lastName, username, email })
                });

                if (!resp.ok) {
                    const err = await resp.json().catch(() => ({}));
                    throw new Error(err.message || 'Impossible de sauvegarder le profil');
                }
                alert('Profil sauvegardÃ© avec succÃ¨s !');
                
                // Mettre Ã  jour l'affichage
                const fullName = `${firstName} ${lastName}`.trim() || username;
                document.getElementById('profileDisplayName').textContent = fullName;
                
                // Mettre Ã  jour les initiales
                const initials = fullName.substring(0, 2).toUpperCase();
                document.getElementById('profileAvatarInitials').textContent = initials;
                
            } catch (error) {
                console.error('Erreur lors de la sauvegarde:', error);
                alert('Erreur lors de la sauvegarde du profil');
            }
        }

        async function changePassword() {
            const current = document.getElementById('currentPassword').value;
            const newPass = document.getElementById('newPassword').value;
            const confirm = document.getElementById('confirmNewPassword').value;

            if (!current || !newPass || !confirm) {
                alert('Veuillez remplir tous les champs');
                return;
            }

            if (newPass !== confirm) {
                alert('Les nouveaux mots de passe ne correspondent pas');
                return;
            }

            if (newPass.length < 6) {
                alert('Le nouveau mot de passe doit contenir au moins 6 caractÃ¨res');
                return;
            }

            try {
                const token = localStorage.getItem('token');
                if (!token) {
                    alert('Vous devez Ãªtre connectÃ© pour changer votre mot de passe');
                    return;
                }

                const response = await fetch(`${API_BASE}/user/change-password`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ currentPassword: current, newPassword: newPass })
                });

                if (response.ok) {
                    alert('Mot de passe changÃ© avec succÃ¨s !');
                } else {
                    const error = await response.json().catch(() => ({}));
                    alert('Erreur: ' + (error.message || 'Impossible de changer le mot de passe'));
                    return;
                }
                
                // Nettoyer les champs
                document.getElementById('currentPassword').value = '';
                document.getElementById('newPassword').value = '';
                document.getElementById('confirmNewPassword').value = '';
                
            } catch (error) {
                console.error('Erreur lors du changement de mot de passe:', error);
                alert('Erreur lors du changement de mot de passe');
            }
        }

        function logout() {
            if (confirm('Ãtes-vous sÃ»r de vouloir vous dÃ©connecter ?')) {
                localStorage.removeItem('token');
                alert('DÃ©connexion rÃ©ussie');
                window.location.href = 'login.html';
            }
        }

        // Initialize dark mode
        function initializeDarkMode() {
            const savedMode = localStorage.getItem('darkMode');
            if (savedMode === 'true') {
                document.body.classList.add('dark');
                const icon = document.getElementById('darkModeIcon');
                if (icon) icon.setAttribute('data-feather', 'sun');
            }
        }

        // Mobile menu toggle
        document.querySelector('[aria-controls="mobile-menu"]')?.addEventListener('click', function() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        });

        // Close dropdowns when clicking outside
        document.addEventListener('click', function(event) {
            const profileDropdown = document.getElementById('userProfileDropdown');
            const profileMenu = document.getElementById('profileMenu');
            
            if (profileDropdown && !profileDropdown.contains(event.target)) {
                profileMenu.classList.add('hidden');
            }
            
            // Close modal when clicking outside
            const modal = document.getElementById('activityModal');
            if (event.target === modal) {
                closeActivityModal();
            }
        });

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // CrÃ©er un token de test si aucun token n'existe (pour les tests)
            if (!localStorage.getItem('token')) {
                localStorage.setItem('token', createTestToken());
                console.log('Token de test crÃ©Ã© pour les dÃ©monstrations');
            }
            
            initializeDarkMode();
            loadExplorationData();

            // Auto-apply filters on change
            document.getElementById('moduleFilter').addEventListener('change', applyFilters);
            document.getElementById('levelFilter').addEventListener('change', applyFilters);
            document.getElementById('searchInput').addEventListener('input', function() {
                // Debounce typing
                clearTimeout(window.__searchTimer);
                window.__searchTimer = setTimeout(applyFilters, 200);
            });
        });

        // Initialize AOS animations
        AOS.init({
            duration: 800,
            easing: 'ease-in-out',
            once: true
        });

        // Replace feather icons
        feather.replace();
    </script>
</body>
</html>